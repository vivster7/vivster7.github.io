(this.webpackJsonpodys=this.webpackJsonpodys||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/plus.5af51bb4.svg"},34:function(e,t,a){e.exports=a.p+"static/media/minus.bf38b4f0.svg"},39:function(e,t,a){e.exports=a(54)},44:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=(a(44),a(8)),l=a(9),d=a(4),s=a(57),u=a(37),p=a(7),f=a(11),h=a(31),g=a.n(h),y=a(14),v=a(10),m=a(22),w=a.n(m),x=a(32),b={1:1*Math.pow(8,-4),2:1*Math.pow(8,-3),3:1*Math.pow(8,-2),4:1*Math.pow(8,-1),5:1*Math.pow(8,0),6:1*Math.pow(8,1),7:1*Math.pow(8,2),8:1*Math.pow(8,3),9:1*Math.pow(8,4)};var E={topLeftX:0,topLeftY:0,translateX:0,translateY:0,scale:b[5],zoomLevel:5,pan:null,dirty:!1},k=Object(l.c)({name:"svg",initialState:E,reducers:{changeZoomLevel:function(e,t){var a,n,r,o=(a=t.payload.zoomLevel,n=1,r=9,Math.min(Math.max(a,n),r)),c=(640-e.topLeftX)/e.scale,i=(360-e.topLeftY)/e.scale,l=Math.max(0,b[o]);e.zoomLevel=t.payload.zoomLevel,e.scale=l,e.topLeftX=640-c*l,e.topLeftY=360-i*l},wheelEnd:function(e,t){var a=t.payload,n=a.topLeftX,r=a.topLeftY,o=a.scale,c=a.zoomLevel;e.topLeftX=n,e.topLeftY=r,e.scale=o,e.zoomLevel=c},endPan:function(e,t){e.topLeftX=t.payload.topLeftX,e.topLeftY=t.payload.topLeftY},dirtySvg:function(e,t){e.dirty=!0},cleanSvg:function(e,t){e.dirty=!1}}}),S=k.actions,O=S.changeZoomLevel,Y=S.wheelEnd,L=S.endPan,X=S.dirtySvg,j=S.cleanSvg,R=k.reducer;function D(e,t){return(e.x<t.x&&e.x+e.width>=t.x||t.x<e.x&&t.x+t.width>=e.x)&&(e.y<t.y&&e.y+e.height>=t.y||t.y<e.y&&t.y+t.height>=e.y)}function z(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(0===t.length)throw new Error("`outline` needs >0 input `rects`");var n=t[0],r=[n.x,n.y],o=r[0],c=r[1],i=n.x+n.width,l=n.y+n.height;return t.forEach((function(e){o=Math.min(o,e.x),c=Math.min(c,e.y),i=Math.max(i,e.x+e.width),l=Math.max(l,e.y+e.height)})),{x:o,y:c,width:i-o,height:l-c}}var C,A=r.a.memo((function(e){var t=e.id,a=Object(d.b)(),n=Object(d.c)((function(e){return e.shapes.data[t]})),o=Object(d.c)((function(e){var t;return null===(t=e.shapes.drag)||void 0===t?void 0:t.id})),c=Object(d.c)((function(e){var t,a;return!!(null===(t=e.shapes.select)||void 0===t?void 0:t.id)&&e.shapes.data[null===(a=e.shapes.select)||void 0===a?void 0:a.id]})),i=Object(d.c)((function(e){var a;return!!(null===(a=e.shapes.groupSelect)||void 0===a?void 0:a.selectedShapeIds[t])})),l=t===(c&&c.id),s=[n.x,n.y],u=s[0],p=s[1],f=(n.width+n.deltaWidth)/2,h=(n.height+n.deltaHeight)/2,g="translate(".concat(u+n.translateX,", ").concat(p+n.translateY,")"),y=o===t?"grabbing":"grab",v=b[n.createdAtZoomLevel],m=14/v,w=4/v,x=1/v,E=5/v,k=3/v,S=l?o===t?"grabbing":"grab":"auto";var O=function(){var e=6/b[n.createdAtZoomLevel];function o(e,n){e.stopPropagation(),a(J({id:t,anchor:n,originalX:e.clientX,originalY:e.clientY}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"nw-resize",onMouseDown:function(e){return o(e,"NWAnchor")}}),r.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"ne-resize",onMouseDown:function(e){return o(e,"NEAnchor")},cx:n.width+n.deltaWidth}),r.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"sw-resize",onMouseDown:function(e){return o(e,"SWAnchor")},cy:n.height+n.deltaHeight}),r.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"se-resize",onMouseDown:function(e){return o(e,"SEAnchor")},cx:n.width+n.deltaWidth,cy:n.height+n.deltaHeight}))};return n?n.isGroupingRect?r.a.createElement("g",{id:t,transform:g,cursor:S,onMouseDown:function(e){return function(e){e.stopPropagation(),e.altKey&&c&&!D(n,c)&&!l?a(G(t)):e.altKey?(a(V({clickX:e.clientX,clickY:e.clientY})),a(ee({clickX:e.clientX,clickY:e.clientY}))):(a(q(t)),a(P({id:t,clickX:e.clientX,clickY:e.clientY})))}(e)}},r.a.createElement("rect",{width:n.width+n.deltaWidth,height:n.height+n.deltaHeight,rx:"4",ry:"4",fill:"darkgray",fillOpacity:.2,stroke:l||i?"cornflowerblue":"darkgray",strokeDasharray:l||i?E+"px":k+"px"}),r.a.createElement("text",{x:f,y:20/b[n.createdAtZoomLevel],textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:m+"px"},n.text),l&&r.a.createElement(O,null)):r.a.createElement("g",{id:t,transform:g,cursor:y,onMouseDown:function(e){return function(e){e.stopPropagation(),e.altKey&&c&&!D(n,c)&&!l?a(G(t)):(a(P({id:t,clickX:e.clientX,clickY:e.clientY})),a(q(t)))}(e)}},r.a.createElement("rect",{width:n.width+n.deltaWidth,height:n.height+n.deltaHeight,rx:w+"px",ry:w+"px",fill:"white",stroke:l||i?"cornflowerblue":"darkgray",strokeWidth:x+"px",strokeDasharray:l||i?E+"px":"0px"}),r.a.createElement("text",{x:f,y:h,textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:m+"px"},n.text),l&&r.a.createElement(O,null)):r.a.createElement(r.a.Fragment,null)})),B=function(){return"id-".concat(Object(v.v4)())},M=Object(l.b)("shapes/endNewRectByClick",function(){var e=Object(x.a)(w.a.mark((function e(t,a){var n,r,o,c,i,l,d,s,u,p,f,h;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.clickX,c=t.clickY,i=a.getState(),l=i.svg,(null===(n=i.shapes.newRectByClick)||void 0===n?void 0:n.clickX)===o&&(null===(r=i.shapes.newRectByClick)||void 0===r?void 0:r.clickY)===c){e.next=5;break}return e.abrupt("return");case 5:return d=B(),s=(o-l.topLeftX)/l.scale,u=(c-l.topLeftY)/l.scale,p=150/b[l.zoomLevel],f=75/b[l.zoomLevel],h={type:"rect",id:d,text:"Concept",x:s-p/2,y:u-f/2,translateX:0,translateY:0,width:p,height:f,deltaWidth:0,deltaHeight:0,isGroupingRect:!1,createdAtZoomLevel:l.zoomLevel},e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),N=a(38);function T(e,t,a){var n=t.findIndex((function(e){return e===a.id}));if(-1!==n&&t.splice(n,1),"rect"===a.type){var r=a;if(r.isGroupingRect){for(var o=0,c=0;c<t.length;c++){var i=e[t[c]];if("rect"===i.type){var l=i;if(l.isGroupingRect&&l.x<r.x)continue}o=c;break}return void t.splice(o,0,a.id)}}t.push(a.id)}var I=Object(l.c)({name:"shapes",initialState:{data:{},shapeOrder:[],select:null,groupSelect:null,groupDrag:null,drag:null,mouse:null,resize:null,newRectByClick:null,endNewRectByDrag:null},reducers:{addShape:function(e,t){e.data[t.payload.id]=t.payload,T(e.data,e.shapeOrder,t.payload)},raiseShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));T(e.data,e.shapeOrder,e.data[a])},deleteShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));delete e.data[a],e.shapeOrder=e.shapeOrder.filter((function(t){if(t===a)return!1;var n=e.data[t];if("arrow"===n.type){var r=n;if(r.fromId===a||r.toId===a)return!1}return!0}))},drawArrow:function(e,t){if(!e.select)throw new Error("Cannot draw arrow without selected object.");var a=e.select.id;if(a!==t.payload){var n=Object.values(e.data).find((function(e){if("arrow"===e.type){var n=e;return n.fromId===a&&n.toId===t.payload}return!1}));if(n)e.select={id:n.id,isEditing:!1};else{var r=e.data[a],o=e.data[t.payload];if(!r)throw new Error("Cannot find shape (".concat(a,")"));if(!o)throw new Error("Cannot find shape (".concat(t.payload,")"));if("rect"!==r.type)throw new Error("Can only draw arrows from Rects.");if("rect"!==o.type)throw new Error("Can only draw arrows to Rects.");if(r.createdAtZoomLevel!==o.createdAtZoomLevel)throw new Error("Cannot draw arrow across zoomLevel (createdAtZoomLevels dont match)");var c="id-".concat(Object(v.v4)()),i={type:"arrow",id:c,fromId:a,toId:t.payload,text:"",createdAtZoomLevel:r.createdAtZoomLevel};e.data[c]=i,T(e.data,e.shapeOrder,i),e.select={id:c,isEditing:!1}}}},selectedShapeEditText:function(e,t){var a=e.select;if(!a)throw new Error("[shapes/editText] Cannot edit text if a shape is not selected. ODYS_SELECT_SHAPE_ACTION should have fired first.");var n=a.id;if(!e.data[n])throw new Error("Cannot find shape with ".concat(n));var r=e.data[n];if(!r.hasOwnProperty("text"))throw new Error("[shapes/editText] Shape is missing 'text' property (".concat(a.id,")"));r.text=t.payload,a.isEditing=!0},selectShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));e.select={id:a,isEditing:!1},e.groupSelect=null,T(e.data,e.shapeOrder,e.data[a])},cancelSelect:function(e,t){e.select=null,e.groupSelect=null},startDrag:function(e,t){e.drag={id:t.payload.id,clickX:t.payload.clickX,clickY:t.payload.clickY}},drag:function(e,t){if(!e.drag)throw new Error("Cannot shapes/drag without `state.drag` (did shapes/startDrag fire first?)");var a=e.drag.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var n=e.data[a];n.translateX=(t.payload.clickX-e.drag.clickX)/t.payload.scale,n.translateY=(t.payload.clickY-e.drag.clickY)/t.payload.scale},endDrag:function(e,t){if(!e.drag)throw new Error("Could not end drag action. Was it started with ODYS_START_DRAG_ACTION?");var a=e.drag.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var n=e.data[a];n.x=n.x+n.translateX,n.y=n.y+n.translateY,n.translateX=0,n.translateY=0,T(e.data,e.shapeOrder,n),e.drag=null},startResize:function(e,t){e.resize={id:t.payload.id,anchor:t.payload.anchor,originalX:t.payload.originalX,originalY:t.payload.originalY,clickX:0,clickY:0}},resize:function(e,t){if(!e.resize)throw new Error("Cannot ODYS_RESIZE_ACTION without `state.resize` (did ODYS_START_RESIZE_ACTION fire first?)");var a=e.resize.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var n=t.payload,r=n.clickX,o=n.clickY,c=n.svgScale,i=e.resize,l=i.originalX,d=i.originalY,s=0,u=0,p=0,f=0;switch(e.resize.anchor){case"SEAnchor":p=(r-l)/c,f=(o-d)/c;break;case"SWAnchor":s=(r-l)/c,p=(l-r)/c,f=(o-d)/c;break;case"NEAnchor":u=(o-d)/c,p=(r-l)/c,f=(d-o)/c;break;case"NWAnchor":s=(r-l)/c,u=(o-d)/c,p=(l-r)/c,f=(d-o)/c;break;default:throw new Error("Unknown anchor point ".concat(e.resize.anchor))}var h=e.data[a];h.translateX=s,h.translateY=u,h.deltaWidth=p,h.deltaHeight=f},endResize:function(e,t){if(!e.resize)throw new Error("Could not end resize shape action. Was it started with ODYS_START_RESIZE_ACTION?");var a=e.resize.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var n=e.data[a];n.x=n.x+n.translateX,n.y=n.y+n.translateY,n.translateX=0,n.translateY=0,n.width=n.width+n.deltaWidth,n.height=n.height+n.deltaHeight,n.deltaWidth=0,n.deltaHeight=0,e.drag=null,e.newRectByClick=null,e.resize=null},startNewRectByClick:function(e,t){e.newRectByClick={clickX:t.payload.clickX,clickY:t.payload.clickY}},startNewRectByDrag:function(e,t){e.endNewRectByDrag={clickX:t.payload.clickX,clickY:t.payload.clickY,shape:null}},endNewRectByDrag:function(e,t){if(!e.endNewRectByDrag)throw new Error("Cannot create rect on drag. Missing endNewRectByDrag state. Was ODYS_START_NEW_RECT_BY_DRAG_ACTION called first?");var a=t.payload,n=a.clickX,r=a.clickY,o=a.svgTopLeftX,c=a.svgTopLeftY,i=a.svgScale,l=a.svgZoomLevel;if(e.endNewRectByDrag.shape)e.endNewRectByDrag=null;else if(e.endNewRectByDrag&&!e.endNewRectByDrag.shape){var d=B(),s={type:"rect",id:d,text:"Group",x:(e.endNewRectByDrag.clickX-o)/i,y:(e.endNewRectByDrag.clickY-c)/i,translateX:0,translateY:0,width:(n-o)/i-(e.endNewRectByDrag.clickX-o)/i,height:(r-c)/i-(e.endNewRectByDrag.clickY-c)/i,deltaWidth:0,deltaHeight:0,isGroupingRect:!0,createdAtZoomLevel:l};e.endNewRectByDrag.shape=s,e.data[d]=s,T(e.data,e.shapeOrder,s),e.resize={id:d,anchor:"SEAnchor",originalX:e.endNewRectByDrag.clickX,originalY:e.endNewRectByDrag.clickY,clickX:0,clickY:0}}},startDragSelection:function(e,t){var a=t.payload,n=a.x,r=a.y,o=a.svgTopLeftX,c=a.svgTopLeftY,i=a.svgScale;e.groupSelect={selectionRect:{x:(n-o)/i,y:(r-c)/i,width:0,height:0},selectedShapeIds:{},outline:{x:0,y:0,width:0,height:0}}},resizeDragSelection:function(e,t){if(!e.groupSelect||!e.groupSelect.selectionRect)throw new Error("shapes/startDragSelection must be called before shapes/resizeDragSelection");var a=e.groupSelect.selectionRect,n=t.payload,r=n.clickX,o=n.clickY,c=n.svgTopLeftX,i=n.svgTopLeftY,l=n.svgScale,d=(r-c)/l-a.x,s=(o-i)/l-a.y;a.width=d,a.height=s;var u=Object.values(e.data).filter((function(e){return"rect"===e.type})).filter((function(e){return D(e,a)})).map((function(e){return[e.id,!0]}));e.groupSelect.selectedShapeIds=Object.fromEntries(u)},endDragSelection:function(e,t){if(!e.groupSelect||!e.groupSelect.selectionRect)throw new Error("shapes/startDragSelection must be called before shapes/endDragSelection");e.groupSelect.selectionRect=null;var a=e.groupSelect.selectedShapeIds,n=Object.keys(a);if(0!==n.length)if(1===n.length)e.select={id:n[0],isEditing:!1},e.groupSelect.selectedShapeIds={};else{var r=Object.keys(a).map((function(t){return e.data[t]}));e.groupSelect.outline=z.apply(void 0,Object(N.a)(r))}},endGroupDrag:function(e,t){e.groupDrag=null,e.groupSelect&&(Object.keys(e.groupSelect.selectedShapeIds).forEach((function(a){var n=e.data[a];n.x+=t.payload.translateX,n.y+=t.payload.translateY})),e.groupSelect.outline.x+=t.payload.translateX,e.groupSelect.outline.y+=t.payload.translateY)}},extraReducers:(C={},Object(y.a)(C,M.fulfilled,(function(e,t){var a=t.payload;a&&(e.drag=null,e.newRectByClick=null,e.endNewRectByDrag=null,e.select={id:a.id,isEditing:!1},e.data[a.id]=a,T(e.data,e.shapeOrder,a))})),Object(y.a)(C,M.rejected,(function(e,t){})),C)}),W=I.actions,Z=W.addShape,F=W.deleteShape,_=W.selectedShapeEditText,H=W.cancelSelect,q=W.selectShape,G=W.drawArrow,P=W.startDrag,K=W.drag,$=W.endDrag,J=W.startResize,U=W.resize,Q=W.endResize,V=W.startNewRectByClick,ee=W.startNewRectByDrag,te=W.endNewRectByDrag,ae=W.startDragSelection,ne=W.resizeDragSelection,re=W.endDragSelection,oe=W.endGroupDrag,ce=I.reducer,ie=r.a.memo((function(e){var t=e.isSelected?"cornflowerblue":"grey",a=1/b[e.createdAtZoomLevel],n=5/b[e.createdAtZoomLevel],o=(e.rotationAngleFromXInRadians||0)*(180/Math.PI);"left"===e.direction&&(o+=180);var c="translate(".concat(e.x,", ").concat(e.y,") rotate(").concat(o,")");return r.a.createElement("g",{transform:c},r.a.createElement("line",{x1:"0",y1:"-0",x2:-n,y2:-n,stroke:t,strokeWidth:a+"px"}),r.a.createElement("line",{x1:"0",y1:"0",x2:-n,y2:n,stroke:t,strokeWidth:a+"px"}))}));function le(e,t){var a=e.p.x,n=e.p.y,r=e.q.x,o=e.q.y,c=t.p.x,i=t.p.y,l=t.q.x,d=t.q.y;return{x:((a*o-n*r)*(c-l)-(a-r)*(c*d-i*l))/((a-r)*(i-d)-(n-o)*(c-l)),y:((a*o-n*r)*(i-d)-(n-o)*(c*d-i*l))/((a-r)*(i-d)-(n-o)*(c-l))}}var de=Object(l.c)({name:"errors",initialState:{data:[]},reducers:{addError:function(e,t){var a={message:t.payload};e.data.push(a)},clearErrors:function(e,t){e.data=[]}}}),se=de.actions,ue=se.addError,pe=se.clearErrors,fe=de.reducer,he=r.a.memo((function(e){var t=e.id,a=Object(d.b)();var n=Object(d.c)((function(e){return e.shapes.data[t]})),o=Object(d.c)((function(e){return e.shapes.data[n.fromId]})),c=Object(d.c)((function(e){return e.shapes.data[n.toId]})),i=Object(d.c)((function(e){var a;return(null===(a=e.shapes.select)||void 0===a?void 0:a.id)===t})),l=i?"cornflowerblue":"gray",s=14/b[n.createdAtZoomLevel],u=1/b[n.createdAtZoomLevel],p=5/b[n.createdAtZoomLevel];if(!o)return a(ue("[r1Arrow] Could not find shape$ ".concat(n.fromId))),r.a.createElement(r.a.Fragment,null);if(!c)return a(ue("[r2Arrow] Could not find shape$ ".concat(n.toId))),r.a.createElement(r.a.Fragment,null);var f,h,g=o.x+o.translateX,y=o.y+o.translateY,v=o.height+o.deltaHeight,m=o.width+o.deltaWidth,w=(g+(g+m))/2,x=(y+(y+v))/2,E=c.x+c.translateX,k=c.y+c.translateY,S=c.height+c.deltaHeight,O=c.width+c.deltaWidth,Y=(E+(E+O))/2,L=(k+(k+S))/2,X=function(e,t){return Math.atan2(e,t)+Math.PI},j=X(y-x,g-w),R=X(y-x,g+m-w),D=X(y+v-x,g-w),z=X(y+v-x,g+m-w),C=X(k-L,E-Y),A=X(k-L,E+O-Y),B=X(k+S-L,E-Y),M=X(k+S-L,E+O-Y),N={p:{x:g,y:y+v+p},q:{x:g+m,y:y+v+p}},T={p:{x:g,y:y-p},q:{x:g+m,y:y-p}},I={p:{x:g-p,y:y},q:{x:g-p,y:y+v}},W={p:{x:g+m+p,y:y},q:{x:g+m+p,y:y+v}},Z={p:{x:E,y:k+S+p},q:{x:E+O,y:k+S+p}},F={p:{x:E,y:k-p},q:{x:E+O,y:k-p}},_={p:{x:E-p,y:k},q:{x:E-p,y:k+S}},H={p:{x:E+O+p,y:k},q:{x:E+O+p,y:k+S}},G=X(L-x,Y-w);if(G>=j&&G<R)f=T;else if(G>=R&&G<z)f=W;else if(G>=z&&G<D)f=N;else{if(!(G>=D||G<j))return a(ue("Could not determine r1Line for arrow offset")),r.a.createElement(r.a.Fragment,null);f=I}if(G>=C&&G<A)h=Z;else if(G>=A&&G<M)h=_;else if(G>=M&&G<B)h=F;else{if(!(G>=B||G<C))return a(ue("Could not determine r2Line for arrow offset")),r.a.createElement(r.a.Fragment,null);h=H}var P={p:{x:w,y:x},q:{x:Y,y:L}},K=le(P,f),$=le(P,h),J=K.x,U=K.y,Q=$.x,V=$.y,ee=function(e,t,a,n){return Math.atan2(n-t,a-e)}(J,U,Q,V);function te(e){e.stopPropagation(),a(q(t))}return r.a.createElement("g",{id:e.id,onMouseDown:function(e){return te(e)}},r.a.createElement("line",{x1:J,y1:U,x2:Q,y2:V,stroke:l,strokeWidth:u+"px"}),r.a.createElement(r.a.Fragment,null),r.a.createElement(ie,{id:ye(),x:Q,y:V,direction:"right",isSelected:i,rotationAngleFromXInRadians:ee,createdAtZoomLevel:n.createdAtZoomLevel}),r.a.createElement("text",{x:(J+Q)/2,y:(U+V)/2,textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:s+"px",onMouseDown:function(e){return te(e)}},n.text))})),ge=r.a.memo((function(e){var t=e.id,a=Object(d.b)(),n=Object(d.c)((function(e){return e.shapes.data[t]})),o="translate(".concat(n.x,", ").concat(n.y,")"),c=Object(d.c)((function(e){return e.shapes.drag&&e.shapes.drag.id}))===e.id?"grabbing":"grab";return r.a.createElement("g",{id:e.id,transform:o,cursor:c,onMouseDown:function(t){return a(P({id:e.id,clickX:t.clientX,clickY:t.clientY}))}},r.a.createElement("text",{style:{textAnchor:"middle"}},r.a.createElement("tspan",null,n.text)))})),ye=function(){return"id-".concat(Object(v.v4)())},ve=function(e){var t=e.id,a=Object(d.c)((function(e){return e.shapes.data[t]})),n=Object(d.b)();return a?"rect"===a.type?r.a.createElement(A,{id:t}):"arrow"===a.type?r.a.createElement(he,{id:t}):"text"===a.type?r.a.createElement(ge,{id:t}):(n(ue("unknown shape: ".concat(a.type))),r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null)},me=r.a.memo((function(){var e=Object(d.c)((function(e){return e.shapes.shapeOrder}));return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(ve,{key:e,id:e})})))})),we=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){var t;return null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.selectionRect})),a=Object(d.c)((function(e){var t;return null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.outline})),o=Object(d.c)((function(e){return e.svg.scale})),c=20/o,i=5/o,l=Object(n.useState)(null),s=Object(p.a)(l,2),u=s[0],h=s[1];function g(e){u&&h(Object(f.a)(Object(f.a)({},u),{},{x:(e.clientX-u.startX)/o,y:(e.clientY-u.startY)/o}))}function y(t){e(oe({translateX:u&&u.x||0,translateY:u&&u.y||0})),h(null)}return Object(n.useEffect)((function(){if(u)return window.addEventListener("mousemove",g,{capture:!0}),window.addEventListener("mouseup",y,{capture:!0}),function(){window.removeEventListener("mousemove",g,{capture:!0}),window.removeEventListener("mouseup",y,{capture:!0})}})),t?r.a.createElement("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"#b3d4fc30",stroke:"blue"}):a?r.a.createElement("rect",{x:a.x-c+(u&&u.x||0),y:a.y-c+(u&&u.y||0),width:a.width+c+c,height:a.height+c+c,fill:"white",fillOpacity:"0",stroke:"black",strokeDasharray:i+"px",cursor:"grab",onMouseDown:function(e){return function(e){e.stopPropagation(),h({startX:e.clientX,startY:e.clientY,x:0,y:0})}(e)}}):r.a.createElement(r.a.Fragment,null)},xe=g()((function(e,t,a,n,r){e(Y({topLeftX:t,topLeftY:a,scale:n,zoomLevel:r}))}),150);var be=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return!!e.shapes.drag})),a=Object(d.c)((function(e){var t;return!!(null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.selectionRect)})),o=Object(d.c)((function(e){return e.shapes.newRectByClick})),c=Object(d.c)((function(e){return!!e.shapes.endNewRectByDrag})),i=Object(d.c)((function(e){return e.svg})),l=Object(d.c)((function(e){return!!e.shapes.resize})),s=Object(n.useState)(i.topLeftX),u=Object(p.a)(s,2),h=u[0],g=u[1],y=Object(n.useState)(i.topLeftY),v=Object(p.a)(y,2),m=v[0],w=v[1],x=Object(n.useState)(0),E=Object(p.a)(x,2),k=E[0],S=E[1],O=Object(n.useState)(0),Y=Object(p.a)(O,2),X=Y[0],R=Y[1],D=Object(n.useState)(i.scale),z=Object(p.a)(D,2),C=z[0],A=z[1],B=Object(n.useState)(i.zoomLevel),N=Object(p.a)(B,2),T=N[0],I=N[1],W=Object(n.useState)(null),Z=Object(p.a)(W,2),F=Z[0],_=Z[1],q=Object(n.useState)(!1),G=Object(p.a)(q,2),P=G[0],J=G[1],oe=P?"crosshair":"auto";function ce(e){"Shift"===e.key&&J(!0)}function ie(e){"Shift"===e.key&&J(!1)}Object(n.useEffect)((function(){return window.addEventListener("keydown",ce),window.addEventListener("keyup",ie),function(){window.removeEventListener("keydown",ce),window.addEventListener("keyup",ie)}})),i.dirty&&(g(i.topLeftX),w(i.topLeftY),A(i.scale),I(i.zoomLevel),e(j()));var le="translate(".concat(h+k,", ").concat(m+X,") scale(").concat(C,")");function de(t){var a,n,r,o=(t.clientX-h)/C,c=(t.clientY-m)/C,i=-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002),l=(a=C*Math.pow(2,i),n=1*Math.pow(8,-4),r=1*Math.pow(8,4),Math.min(Math.max(a,n),r)),d=t.clientX-o*l,s=t.clientY-c*l;A(l),g(d),w(s),I(function(e,t){var a=Object(f.a)(Object(f.a)({},b),{},{0:-1/0,10:1/0}),n=[a[e-1],a[e+1]],r=n[0],o=n[1];if(t>r&&t<o)return e;if(t<=r){for(var c=1;c<e;c++)if(t<=a[c])return c}else if(t>=o)for(var i=9;i>e;i--)if(t>=a[i])return i;throw new Error("Couldn't figure out a zoomLevel for scale ".concat(t))}(T,l)),xe(e,d,s,l,T)}return r.a.createElement("svg",{id:"odys-svg",style:{height:"100%",width:"100%",background:"var(--odys-background-gray)"},onMouseMove:function(n){return function(n){c&&e(te({clickX:n.clientX,clickY:n.clientY,svgTopLeftX:i.topLeftX,svgTopLeftY:i.topLeftY,svgScale:i.scale,svgZoomLevel:i.zoomLevel})),t&&e(K({clickX:n.clientX,clickY:n.clientY,scale:i.scale})),a&&e(ne({clickX:n.clientX,clickY:n.clientY,svgTopLeftX:i.topLeftX,svgTopLeftY:i.topLeftY,svgScale:i.scale})),null!==F&&(S(n.clientX-F.startX),R(n.clientY-F.startY)),l&&e(U({clickX:n.clientX,clickY:n.clientY,svgScale:i.scale}))}(n)},onMouseDown:function(t){return function(t){e(H()),t.altKey?(e(V({clickX:t.clientX,clickY:t.clientY})),e(ee({clickX:t.clientX,clickY:t.clientY}))):P?e(ae({x:t.clientX,y:t.clientY,svgTopLeftX:h,svgTopLeftY:m,svgScale:C})):_({startX:t.clientX,startY:t.clientY})}(t)},onMouseUp:function(n){return function(n){o&&o.clickX===n.clientX&&o.clickY===n.clientY&&e(M({clickX:n.clientX,clickY:n.clientY})),t&&e($()),a&&e(re()),null!==F&&(_(null),g(h+k),w(m+X),S(0),R(0),e(L({topLeftX:h,topLeftY:m}))),l&&e(Q())}(n)},onWheel:function(e){return de(e)},cursor:oe},r.a.createElement("g",{id:"odys-zoomable-group",transform:le},r.a.createElement(me,null),r.a.createElement(we,null)))};var Ee=r.a.memo((function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.shapes.select})),a=null===t||void 0===t?void 0:t.id,o=null===t||void 0===t?void 0:t.isEditing,c=Object(d.c)((function(e){return a&&e.shapes.data[a]}));Object(n.useEffect)((function(){if(void 0!==a&&void 0!==o){var t=function(e,t,a){return function(n){"Backspace"===n.code&&!1===a&&e(F(t))}}(e,a,o);return window.addEventListener("keydown",t,{capture:!0}),function(){window.removeEventListener("keydown",t,{capture:!0})}}}));var i=Object(n.useRef)(null),l=c&&c.text,s=o&&l?l:"";Object(n.useEffect)((function(){i&&i.current&&i.current.focus()}));return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:{height:"0px",padding:"0px",border:"0px",opacity:0},ref:i,type:"text",onChange:function(t){e(_(t.target.value))},value:s})):r.a.createElement(r.a.Fragment,null)})),ke=function(){return"id-".concat(Object(v.v4)())},Se=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.shapes}));if(0===Object.entries(t.data).length){var a=ke(),n=ke(),o=(ke(),function(e,t,a){return{type:"rect",id:ke(),text:e,x:t,y:a,translateX:0,translateY:0,width:150,height:75,deltaWidth:0,deltaHeight:0,isGroupingRect:!1,createdAtZoomLevel:5}});e(Z(o("A",150,100))),e(Z(o("B",400,100)))}return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement("div",{style:{opacity:0,display:"flex",flex:"0 0",height:"0px"}},r.a.createElement(Ee,null)))},Oe=a(33),Ye=a.n(Oe),Le=a(34),Xe=a.n(Le);var je=function(){var e=Object(d.c)((function(e){return e.svg})),t=e.topLeftX,a=e.topLeftY,o=e.scale,c=e.zoomLevel,i=function(e){var t=Object(n.useState)({x:0,y:0}),a=Object(p.a)(t,2),o=a[0],c=a[1],i=e.topLeftX,l=e.topLeftY,d=e.scale;return Object(n.useEffect)((function(){var e=function(e,t,a,n){return function(r){var o=(r.clientX-e)/a,c=(r.clientY-t)/a;n({x:o,y:c})}}(i,l,d,c);return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[i,l,d,c]),r.a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap",backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 2px -2px grey",border:"1px rgba(204,204,204,0.5) solid",padding:"12px",minWidth:"100px",maxWidth:"200px",justifyContent:"space-around",fontSize:"12px"}},r.a.createElement("p",{style:{borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px",backgroundColor:"white"}},o.x.toFixed(2)),r.a.createElement("p",{style:{borderLeft:"1px rgba(204, 204, 204, 0.5) solid",margin:"-3px 5px"}}),r.a.createElement("p",{style:{borderTopRightRadius:"8px",borderBottomRightRadius:"8px",backgroundColor:"white"}},o.y.toFixed(2)))},l=function(e){var t=Object(d.b)(),a=e.zoomLevel;return r.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap",backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 2px -2px grey",border:"1px rgba(204,204,204,0.5) solid",padding:"6px",justifyContent:"space-around",fontSize:"18px",alignSelf:"flex-end",marginBottom:"5px"}},r.a.createElement("img",{src:Ye.a,alt:"+",style:{height:"12px",padding:"4px"},onClick:function(){return t(O({zoomLevel:a+1})),void t(X())}}),r.a.createElement("p",{style:{borderTop:"1px rgba(204, 204, 204, 0.5) solid",borderBottom:"1px rgba(204, 204, 204, 0.5) solid",padding:"6px",margin:"3px -1px",fontSize:"14px"}},a),r.a.createElement("img",{src:Xe.a,alt:"-",style:{height:"12px",padding:"4px"},onClick:function(){return t(O({zoomLevel:a-1})),void t(X())}}))};return r.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap"}},r.a.createElement(l,{zoomLevel:c}),r.a.createElement(i,{topLeftX:t,topLeftY:a,scale:o}))},Re=function(e){var t=Object(d.b)();return r.a.createElement("div",{style:{backgroundColor:"rgba(208, 0, 0, 0.05)",border:"1px solid rgb(208, 0, 0)",boxShadow:"rgb(208, 0, 0) 0px 4px 2px -2px",width:"200px",borderRadius:"20px",minHeight:"30px",paddingLeft:"10px",paddingRight:"10px",paddingBottom:"20px",margin:"5px 0px",fontSize:"small"}},r.a.createElement("div",{style:{display:"flex",paddingRight:"5px",paddingBottom:"5px",justifyContent:"flex-end"}},r.a.createElement("p",{onClick:function(e){return t(pe())}},"x")),r.a.createElement("span",null,e.message))},De=function(){var e=Object(d.c)((function(e){return e.errors}));return r.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap"}},e.data.map((function(e,t){return r.a.createElement(Re,{key:t,message:e.message})})))},ze=function(){return r.a.createElement("div",{style:{height:"100%",width:"100%"},className:"row"},r.a.createElement("div",{className:"col flex-elem"},r.a.createElement(Se,null)),r.a.createElement("div",{style:{position:"absolute",bottom:"10px",right:"10px"}},r.a.createElement(je,null)),r.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px"}},r.a.createElement(De,null)))},Ce=Object(i.c)({shapes:ce,svg:R,errors:fe}),Ae=Object(l.a)({reducer:Ce}),Be=new u.a,Me=function(){return r.a.createElement(s.a,{client:Be},r.a.createElement(d.a,{store:Ae},r.a.createElement(ze,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.cd51669e.chunk.js.map