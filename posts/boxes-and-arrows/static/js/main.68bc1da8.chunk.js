(this.webpackJsonpodys=this.webpackJsonpodys||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/plus.5af51bb4.svg"},41:function(e,t,a){e.exports=a.p+"static/media/minus.bf38b4f0.svg"},48:function(e,t,a){e.exports=a(62)},53:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(25),o=a.n(c),i=(a(53),a(13)),l=a(14),d=a(4),s=a(6),u=a(46),p=a(11),f=a(17),h=a(38),g=a.n(h),m=a(23),y=a(16),v=a(31),E=a.n(v),w=a(39),x={1:1*Math.pow(8,-4),2:1*Math.pow(8,-3),3:1*Math.pow(8,-2),4:1*Math.pow(8,-1),5:1*Math.pow(8,0),6:1*Math.pow(8,1),7:1*Math.pow(8,2),8:1*Math.pow(8,3),9:1*Math.pow(8,4)};var S={topLeftX:0,topLeftY:0,translateX:0,translateY:0,scale:x[5],zoomLevel:5,pan:null,dirty:!1},A=Object(l.c)({name:"svg",initialState:S,reducers:{changeZoomLevel:function(e,t){var a,r,n,c=(a=t.payload.zoomLevel,r=1,n=9,Math.min(Math.max(a,r),n)),o=(640-e.topLeftX)/e.scale,i=(360-e.topLeftY)/e.scale,l=Math.max(0,x[c]);e.zoomLevel=t.payload.zoomLevel,e.scale=l,e.topLeftX=640-o*l,e.topLeftY=360-i*l},wheelEnd:function(e,t){var a=t.payload,r=a.topLeftX,n=a.topLeftY,c=a.scale,o=a.zoomLevel;e.topLeftX=r,e.topLeftY=n,e.scale=c,e.zoomLevel=o},endPan:function(e,t){e.topLeftX=t.payload.topLeftX,e.topLeftY=t.payload.topLeftY},dirtySvg:function(e,t){e.dirty=!0},cleanSvg:function(e,t){e.dirty=!1}}}),b=A.actions,D=b.changeZoomLevel,C=b.wheelEnd,O=b.endPan,Y=b.dirtySvg,k=b.cleanSvg,R=A.reducer;function L(e,t){return(e.x<t.x&&e.x+e.width>=t.x||t.x<e.x&&t.x+t.width>=e.x)&&(e.y<t.y&&e.y+e.height>=t.y||t.y<e.y&&t.y+t.height>=e.y)}function _(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(0===t.length)throw new Error("`outline` needs >0 input `rects`");var r=t[0],n=[r.x,r.y],c=n[0],o=n[1],i=r.x+r.width,l=r.y+r.height;return t.forEach((function(e){c=Math.min(c,e.x),o=Math.min(o,e.y),i=Math.max(i,e.x+e.width),l=Math.max(l,e.y+e.height)})),{x:c,y:o,width:i-c,height:l-o}}var X,j=n.a.memo((function(e){var t=e.id,a=Object(d.b)(),r=Object(d.c)((function(e){return e.shapes.data[t]})),c=Object(d.c)((function(e){var t;return null===(t=e.shapes.drag)||void 0===t?void 0:t.id})),o=Object(d.c)((function(e){var t,a;return!!(null===(t=e.shapes.select)||void 0===t?void 0:t.id)&&e.shapes.data[null===(a=e.shapes.select)||void 0===a?void 0:a.id]})),i=Object(d.c)((function(e){var a;return!!(null===(a=e.shapes.groupSelect)||void 0===a?void 0:a.selectedShapeIds[t])})),l=t===(o&&o.id),s=[r.x,r.y],u=s[0],p=s[1],f=(r.width+r.deltaWidth)/2,h=(r.height+r.deltaHeight)/2,g="translate(".concat(u+r.translateX,", ").concat(p+r.translateY,")"),m=c===t?"grabbing":"grab",y=x[r.createdAtZoomLevel],v=14/y,E=4/y,w=1/y,S=5/y,A=3/y,b=l?c===t?"grabbing":"grab":"auto";var D=function(){var e=6/x[r.createdAtZoomLevel];function c(e,r){e.stopPropagation(),a(V({id:t,anchor:r,originalX:e.clientX,originalY:e.clientY}))}return n.a.createElement(n.a.Fragment,null,n.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"nw-resize",onMouseDown:function(e){return c(e,"NWAnchor")}}),n.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"ne-resize",onMouseDown:function(e){return c(e,"NEAnchor")},cx:r.width+r.deltaWidth}),n.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"sw-resize",onMouseDown:function(e){return c(e,"SWAnchor")},cy:r.height+r.deltaHeight}),n.a.createElement("circle",{fill:"cornflowerblue",r:e+"px",cursor:"se-resize",onMouseDown:function(e){return c(e,"SEAnchor")},cx:r.width+r.deltaWidth,cy:r.height+r.deltaHeight}))};return r?r.isGroupingRect?n.a.createElement("g",{id:t,transform:g,cursor:b,onMouseDown:function(e){return function(e){e.stopPropagation(),e.altKey&&o&&!L(r,o)&&!l?a(F(t)):e.altKey?(a(Q({clickX:e.clientX,clickY:e.clientY})),a(ee({clickX:e.clientX,clickY:e.clientY}))):(a(Z(t)),a(H({id:t,clickX:e.clientX,clickY:e.clientY})))}(e)}},n.a.createElement("rect",{width:r.width+r.deltaWidth,height:r.height+r.deltaHeight,rx:"4",ry:"4",fill:"darkgray",fillOpacity:.2,stroke:l||i?"cornflowerblue":"darkgray",strokeDasharray:l||i?S+"px":A+"px"}),n.a.createElement("text",{x:f,y:20/x[r.createdAtZoomLevel],textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:v+"px"},r.text),l&&n.a.createElement(D,null)):n.a.createElement("g",{id:t,transform:g,cursor:m,onMouseDown:function(e){return function(e){e.stopPropagation(),e.altKey&&o&&!L(r,o)&&!l?a(F(t)):(a(H({id:t,clickX:e.clientX,clickY:e.clientY})),a(Z(t)))}(e)}},n.a.createElement("rect",{width:r.width+r.deltaWidth,height:r.height+r.deltaHeight,rx:E+"px",ry:E+"px",fill:"white",stroke:l||i?"cornflowerblue":"darkgray",strokeWidth:w+"px",strokeDasharray:l||i?S+"px":"0px"}),n.a.createElement("text",{x:f,y:h,textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:v+"px"},r.text),l&&n.a.createElement(D,null)):n.a.createElement(n.a.Fragment,null)})),I=function(){return"id-".concat(Object(y.v4)())},T=Object(l.b)("shapes/endNewRectByClick",function(){var e=Object(w.a)(E.a.mark((function e(t,a){var r,n,c,o,i,l,d,s,u,p,f,h;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.clickX,o=t.clickY,i=a.getState(),l=i.svg,(null===(r=i.shapes.newRectByClick)||void 0===r?void 0:r.clickX)===c&&(null===(n=i.shapes.newRectByClick)||void 0===n?void 0:n.clickY)===o){e.next=5;break}return e.abrupt("return");case 5:return d=I(),s=(c-l.topLeftX)/l.scale,u=(o-l.topLeftY)/l.scale,p=150/x[l.zoomLevel],f=75/x[l.zoomLevel],h={type:"rect",id:d,text:"Concept",x:s-p/2,y:u-f/2,translateX:0,translateY:0,width:p,height:f,deltaWidth:0,deltaHeight:0,isGroupingRect:!1,createdAtZoomLevel:l.zoomLevel},e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),M=a(47);function N(e,t,a){var r=t.findIndex((function(e){return e===a.id}));if(-1!==r&&t.splice(r,1),"rect"===a.type){var n=a;if(n.isGroupingRect){for(var c=0,o=0;o<t.length;o++){var i=e[t[o]];if("rect"===i.type){var l=i;if(l.isGroupingRect&&l.x<n.x)continue}c=o;break}return void t.splice(c,0,a.id)}}t.push(a.id)}var z=Object(l.c)({name:"shapes",initialState:{data:{},shapeOrder:[],select:null,groupSelect:null,groupDrag:null,drag:null,mouse:null,resize:null,newRectByClick:null,endNewRectByDrag:null},reducers:{addShape:function(e,t){e.data[t.payload.id]=t.payload,N(e.data,e.shapeOrder,t.payload)},raiseShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));N(e.data,e.shapeOrder,e.data[a])},deleteShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));delete e.data[a],e.shapeOrder=e.shapeOrder.filter((function(t){if(t===a)return!1;var r=e.data[t];if("arrow"===r.type){var n=r;if(n.fromId===a||n.toId===a)return!1}return!0}))},drawArrow:function(e,t){if(!e.select)throw new Error("Cannot draw arrow without selected object.");var a=e.select.id;if(a!==t.payload){var r=Object.values(e.data).find((function(e){if("arrow"===e.type){var r=e;return r.fromId===a&&r.toId===t.payload}return!1}));if(r)e.select={id:r.id,isEditing:!1};else{var n=e.data[a],c=e.data[t.payload];if(!n)throw new Error("Cannot find shape (".concat(a,")"));if(!c)throw new Error("Cannot find shape (".concat(t.payload,")"));if("rect"!==n.type)throw new Error("Can only draw arrows from Rects.");if("rect"!==c.type)throw new Error("Can only draw arrows to Rects.");if(n.createdAtZoomLevel!==c.createdAtZoomLevel)throw new Error("Cannot draw arrow across zoomLevel (createdAtZoomLevels dont match)");var o="id-".concat(Object(y.v4)()),i={type:"arrow",id:o,fromId:a,toId:t.payload,text:"",createdAtZoomLevel:n.createdAtZoomLevel};e.data[o]=i,N(e.data,e.shapeOrder,i),e.select={id:o,isEditing:!1}}}},selectedShapeEditText:function(e,t){var a=e.select;if(!a)throw new Error("[shapes/editText] Cannot edit text if a shape is not selected. ODYS_SELECT_SHAPE_ACTION should have fired first.");var r=a.id;if(!e.data[r])throw new Error("Cannot find shape with ".concat(r));var n=e.data[r];if(!n.hasOwnProperty("text"))throw new Error("[shapes/editText] Shape is missing 'text' property (".concat(a.id,")"));n.text=t.payload,a.isEditing=!0},selectShape:function(e,t){var a=t.payload;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));e.select={id:a,isEditing:!1},e.groupSelect=null,N(e.data,e.shapeOrder,e.data[a])},cancelSelect:function(e,t){e.select=null,e.groupSelect=null},startDrag:function(e,t){e.drag={id:t.payload.id,clickX:t.payload.clickX,clickY:t.payload.clickY}},drag:function(e,t){if(!e.drag)throw new Error("Cannot shapes/drag without `state.drag` (did shapes/startDrag fire first?)");var a=e.drag.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var r=e.data[a];r.translateX=(t.payload.clickX-e.drag.clickX)/t.payload.scale,r.translateY=(t.payload.clickY-e.drag.clickY)/t.payload.scale},endDrag:function(e,t){if(!e.drag)throw new Error("Could not end drag action. Was it started with ODYS_START_DRAG_ACTION?");var a=e.drag.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var r=e.data[a];r.x=r.x+r.translateX,r.y=r.y+r.translateY,r.translateX=0,r.translateY=0,N(e.data,e.shapeOrder,r),e.drag=null},startResize:function(e,t){e.resize={id:t.payload.id,anchor:t.payload.anchor,originalX:t.payload.originalX,originalY:t.payload.originalY,clickX:0,clickY:0}},resize:function(e,t){if(!e.resize)throw new Error("Cannot ODYS_RESIZE_ACTION without `state.resize` (did ODYS_START_RESIZE_ACTION fire first?)");var a=e.resize.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var r=t.payload,n=r.clickX,c=r.clickY,o=r.svgScale,i=e.resize,l=i.originalX,d=i.originalY,s=0,u=0,p=0,f=0;switch(e.resize.anchor){case"SEAnchor":p=(n-l)/o,f=(c-d)/o;break;case"SWAnchor":s=(n-l)/o,p=(l-n)/o,f=(c-d)/o;break;case"NEAnchor":u=(c-d)/o,p=(n-l)/o,f=(d-c)/o;break;case"NWAnchor":s=(n-l)/o,u=(c-d)/o,p=(l-n)/o,f=(d-c)/o;break;default:throw new Error("Unknown anchor point ".concat(e.resize.anchor))}var h=e.data[a];h.translateX=s,h.translateY=u,h.deltaWidth=p,h.deltaHeight=f},endResize:function(e,t){if(!e.resize)throw new Error("Could not end resize shape action. Was it started with ODYS_START_RESIZE_ACTION?");var a=e.resize.id;if(!e.data[a])throw new Error("Cannot find shape with ".concat(a));var r=e.data[a];r.x=r.x+r.translateX,r.y=r.y+r.translateY,r.translateX=0,r.translateY=0,r.width=r.width+r.deltaWidth,r.height=r.height+r.deltaHeight,r.deltaWidth=0,r.deltaHeight=0,e.drag=null,e.newRectByClick=null,e.resize=null},startNewRectByClick:function(e,t){e.newRectByClick={clickX:t.payload.clickX,clickY:t.payload.clickY}},startNewRectByDrag:function(e,t){e.endNewRectByDrag={clickX:t.payload.clickX,clickY:t.payload.clickY,shape:null}},endNewRectByDrag:function(e,t){if(!e.endNewRectByDrag)throw new Error("Cannot create rect on drag. Missing endNewRectByDrag state. Was ODYS_START_NEW_RECT_BY_DRAG_ACTION called first?");var a=t.payload,r=a.clickX,n=a.clickY,c=a.svgTopLeftX,o=a.svgTopLeftY,i=a.svgScale,l=a.svgZoomLevel;if(e.endNewRectByDrag.shape)e.endNewRectByDrag=null;else if(e.endNewRectByDrag&&!e.endNewRectByDrag.shape){var d=I(),s={type:"rect",id:d,text:"Group",x:(e.endNewRectByDrag.clickX-c)/i,y:(e.endNewRectByDrag.clickY-o)/i,translateX:0,translateY:0,width:(r-c)/i-(e.endNewRectByDrag.clickX-c)/i,height:(n-o)/i-(e.endNewRectByDrag.clickY-o)/i,deltaWidth:0,deltaHeight:0,isGroupingRect:!0,createdAtZoomLevel:l};e.endNewRectByDrag.shape=s,e.data[d]=s,N(e.data,e.shapeOrder,s),e.resize={id:d,anchor:"SEAnchor",originalX:e.endNewRectByDrag.clickX,originalY:e.endNewRectByDrag.clickY,clickX:0,clickY:0}}},startDragSelection:function(e,t){var a=t.payload,r=a.x,n=a.y,c=a.svgTopLeftX,o=a.svgTopLeftY,i=a.svgScale;e.groupSelect={selectionRect:{x:(r-c)/i,y:(n-o)/i,width:0,height:0},selectedShapeIds:{},outline:{x:0,y:0,width:0,height:0}}},resizeDragSelection:function(e,t){if(!e.groupSelect||!e.groupSelect.selectionRect)throw new Error("shapes/startDragSelection must be called before shapes/resizeDragSelection");var a=e.groupSelect.selectionRect,r=t.payload,n=r.clickX,c=r.clickY,o=r.svgTopLeftX,i=r.svgTopLeftY,l=r.svgScale,d=(n-o)/l-a.x,s=(c-i)/l-a.y;a.width=d,a.height=s;var u=Object.values(e.data).filter((function(e){return"rect"===e.type})).filter((function(e){return L(e,a)})).map((function(e){return[e.id,!0]}));e.groupSelect.selectedShapeIds=Object.fromEntries(u)},endDragSelection:function(e,t){if(!e.groupSelect||!e.groupSelect.selectionRect)throw new Error("shapes/startDragSelection must be called before shapes/endDragSelection");e.groupSelect.selectionRect=null;var a=e.groupSelect.selectedShapeIds,r=Object.keys(a);if(0!==r.length)if(1===r.length)e.select={id:r[0],isEditing:!1},e.groupSelect.selectedShapeIds={};else{var n=Object.keys(a).map((function(t){return e.data[t]}));e.groupSelect.outline=_.apply(void 0,Object(M.a)(n))}},endGroupDrag:function(e,t){e.groupDrag=null,e.groupSelect&&(Object.keys(e.groupSelect.selectedShapeIds).forEach((function(a){var r=e.data[a];r.x+=t.payload.translateX,r.y+=t.payload.translateY})),e.groupSelect.outline.x+=t.payload.translateX,e.groupSelect.outline.y+=t.payload.translateY)}},extraReducers:(X={},Object(m.a)(X,T.fulfilled,(function(e,t){var a=t.payload;a&&(e.drag=null,e.newRectByClick=null,e.endNewRectByDrag=null,e.select={id:a.id,isEditing:!1},e.data[a.id]=a,N(e.data,e.shapeOrder,a))})),Object(m.a)(X,T.rejected,(function(e,t){})),X)}),B=z.actions,P=B.addShape,U=B.deleteShape,W=B.selectedShapeEditText,K=B.cancelSelect,Z=B.selectShape,F=B.drawArrow,H=B.startDrag,q=B.drag,G=B.endDrag,V=B.startResize,$=B.resize,J=B.endResize,Q=B.startNewRectByClick,ee=B.startNewRectByDrag,te=B.endNewRectByDrag,ae=B.startDragSelection,re=B.resizeDragSelection,ne=B.endDragSelection,ce=B.endGroupDrag,oe=z.reducer,ie=n.a.memo((function(e){var t=e.isSelected?"cornflowerblue":"grey",a=1/x[e.createdAtZoomLevel],r=5/x[e.createdAtZoomLevel],c=(e.rotationAngleFromXInRadians||0)*(180/Math.PI);"left"===e.direction&&(c+=180);var o="translate(".concat(e.x,", ").concat(e.y,") rotate(").concat(c,")");return n.a.createElement("g",{transform:o},n.a.createElement("line",{x1:"0",y1:"-0",x2:-r,y2:-r,stroke:t,strokeWidth:a+"px"}),n.a.createElement("line",{x1:"0",y1:"0",x2:-r,y2:r,stroke:t,strokeWidth:a+"px"}))}));function le(e,t){var a=e.p.x,r=e.p.y,n=e.q.x,c=e.q.y,o=t.p.x,i=t.p.y,l=t.q.x,d=t.q.y;return{x:((a*c-r*n)*(o-l)-(a-n)*(o*d-i*l))/((a-n)*(i-d)-(r-c)*(o-l)),y:((a*c-r*n)*(i-d)-(r-c)*(o*d-i*l))/((a-n)*(i-d)-(r-c)*(o-l))}}var de=Object(l.c)({name:"errors",initialState:{data:[]},reducers:{addError:function(e,t){var a={message:t.payload};e.data.push(a)},clearErrors:function(e,t){e.data=[]}}}),se=de.actions,ue=se.addError,pe=se.clearErrors,fe=de.reducer,he=n.a.memo((function(e){var t=e.id,a=Object(d.b)();var r=Object(d.c)((function(e){return e.shapes.data[t]})),c=Object(d.c)((function(e){return e.shapes.data[r.fromId]})),o=Object(d.c)((function(e){return e.shapes.data[r.toId]})),i=Object(d.c)((function(e){var a;return(null===(a=e.shapes.select)||void 0===a?void 0:a.id)===t})),l=i?"cornflowerblue":"gray",s=14/x[r.createdAtZoomLevel],u=1/x[r.createdAtZoomLevel],p=5/x[r.createdAtZoomLevel];if(!c)return a(ue("[r1Arrow] Could not find shape$ ".concat(r.fromId))),n.a.createElement(n.a.Fragment,null);if(!o)return a(ue("[r2Arrow] Could not find shape$ ".concat(r.toId))),n.a.createElement(n.a.Fragment,null);var f,h,g=c.x+c.translateX,m=c.y+c.translateY,y=c.height+c.deltaHeight,v=c.width+c.deltaWidth,E=(g+(g+v))/2,w=(m+(m+y))/2,S=o.x+o.translateX,A=o.y+o.translateY,b=o.height+o.deltaHeight,D=o.width+o.deltaWidth,C=(S+(S+D))/2,O=(A+(A+b))/2,Y=function(e,t){return Math.atan2(e,t)+Math.PI},k=Y(m-w,g-E),R=Y(m-w,g+v-E),L=Y(m+y-w,g-E),_=Y(m+y-w,g+v-E),X=Y(A-O,S-C),j=Y(A-O,S+D-C),I=Y(A+b-O,S-C),T=Y(A+b-O,S+D-C),M={p:{x:g,y:m+y+p},q:{x:g+v,y:m+y+p}},N={p:{x:g,y:m-p},q:{x:g+v,y:m-p}},z={p:{x:g-p,y:m},q:{x:g-p,y:m+y}},B={p:{x:g+v+p,y:m},q:{x:g+v+p,y:m+y}},P={p:{x:S,y:A+b+p},q:{x:S+D,y:A+b+p}},U={p:{x:S,y:A-p},q:{x:S+D,y:A-p}},W={p:{x:S-p,y:A},q:{x:S-p,y:A+b}},K={p:{x:S+D+p,y:A},q:{x:S+D+p,y:A+b}},F=Y(O-w,C-E);if(F>=k&&F<R)f=N;else if(F>=R&&F<_)f=B;else if(F>=_&&F<L)f=M;else{if(!(F>=L||F<k))return a(ue("Could not determine r1Line for arrow offset")),n.a.createElement(n.a.Fragment,null);f=z}if(F>=X&&F<j)h=P;else if(F>=j&&F<T)h=W;else if(F>=T&&F<I)h=U;else{if(!(F>=I||F<X))return a(ue("Could not determine r2Line for arrow offset")),n.a.createElement(n.a.Fragment,null);h=K}var H={p:{x:E,y:w},q:{x:C,y:O}},q=le(H,f),G=le(H,h),V=q.x,$=q.y,J=G.x,Q=G.y,ee=function(e,t,a,r){return Math.atan2(r-t,a-e)}(V,$,J,Q);function te(e){e.stopPropagation(),a(Z(t))}return n.a.createElement("g",{id:e.id,onMouseDown:function(e){return te(e)}},n.a.createElement("line",{x1:V,y1:$,x2:J,y2:Q,stroke:l,strokeWidth:u+"px"}),n.a.createElement(n.a.Fragment,null),n.a.createElement(ie,{id:me(),x:J,y:Q,direction:"right",isSelected:i,rotationAngleFromXInRadians:ee,createdAtZoomLevel:r.createdAtZoomLevel}),n.a.createElement("text",{x:(V+J)/2,y:($+Q)/2,textAnchor:"middle",textRendering:"optimizeSpeed",fontSize:s+"px",onMouseDown:function(e){return te(e)}},r.text))})),ge=n.a.memo((function(e){var t=e.id,a=Object(d.b)(),r=Object(d.c)((function(e){return e.shapes.data[t]})),c="translate(".concat(r.x,", ").concat(r.y,")"),o=Object(d.c)((function(e){return e.shapes.drag&&e.shapes.drag.id}))===e.id?"grabbing":"grab";return n.a.createElement("g",{id:e.id,transform:c,cursor:o,onMouseDown:function(t){return a(H({id:e.id,clickX:t.clientX,clickY:t.clientY}))}},n.a.createElement("text",{style:{textAnchor:"middle"}},n.a.createElement("tspan",null,r.text)))})),me=function(){return"id-".concat(Object(y.v4)())},ye=function(e){var t=e.id,a=Object(d.c)((function(e){return e.shapes.data[t]})),r=Object(d.b)();return a?"rect"===a.type?n.a.createElement(j,{id:t}):"arrow"===a.type?n.a.createElement(he,{id:t}):"text"===a.type?n.a.createElement(ge,{id:t}):(r(ue("unknown shape: ".concat(a.type))),n.a.createElement(n.a.Fragment,null)):n.a.createElement(n.a.Fragment,null)},ve=n.a.memo((function(){var e=Object(d.c)((function(e){return e.shapes.shapeOrder}));return n.a.createElement(n.a.Fragment,null,e.map((function(e){return n.a.createElement(ye,{key:e,id:e})})))})),Ee=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){var t;return null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.selectionRect})),a=Object(d.c)((function(e){var t;return null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.outline})),c=Object(d.c)((function(e){return e.svg.scale})),o=20/c,i=5/c,l=Object(r.useState)(null),s=Object(p.a)(l,2),u=s[0],h=s[1];function g(e){u&&h(Object(f.a)(Object(f.a)({},u),{},{x:(e.clientX-u.startX)/c,y:(e.clientY-u.startY)/c}))}function m(t){e(ce({translateX:u&&u.x||0,translateY:u&&u.y||0})),h(null)}return Object(r.useEffect)((function(){if(u)return window.addEventListener("mousemove",g,{capture:!0}),window.addEventListener("mouseup",m,{capture:!0}),function(){window.removeEventListener("mousemove",g,{capture:!0}),window.removeEventListener("mouseup",m,{capture:!0})}})),t?n.a.createElement("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"#b3d4fc30",stroke:"blue"}):a?n.a.createElement("rect",{x:a.x-o+(u&&u.x||0),y:a.y-o+(u&&u.y||0),width:a.width+o+o,height:a.height+o+o,fill:"white",fillOpacity:"0",stroke:"black",strokeDasharray:i+"px",cursor:"grab",onMouseDown:function(e){return function(e){e.stopPropagation(),h({startX:e.clientX,startY:e.clientY,x:0,y:0})}(e)}}):n.a.createElement(n.a.Fragment,null)},we=g()((function(e,t,a,r,n){e(C({topLeftX:t,topLeftY:a,scale:r,zoomLevel:n}))}),150);var xe=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return!!e.shapes.drag})),a=Object(d.c)((function(e){var t;return!!(null===(t=e.shapes.groupSelect)||void 0===t?void 0:t.selectionRect)})),c=Object(d.c)((function(e){return e.shapes.newRectByClick})),o=Object(d.c)((function(e){return!!e.shapes.endNewRectByDrag})),i=Object(d.c)((function(e){return e.svg})),l=Object(d.c)((function(e){return!!e.shapes.resize})),s=Object(r.useState)(i.topLeftX),u=Object(p.a)(s,2),h=u[0],g=u[1],m=Object(r.useState)(i.topLeftY),y=Object(p.a)(m,2),v=y[0],E=y[1],w=Object(r.useState)(0),S=Object(p.a)(w,2),A=S[0],b=S[1],D=Object(r.useState)(0),C=Object(p.a)(D,2),Y=C[0],R=C[1],L=Object(r.useState)(i.scale),_=Object(p.a)(L,2),X=_[0],j=_[1],I=Object(r.useState)(i.zoomLevel),M=Object(p.a)(I,2),N=M[0],z=M[1],B=Object(r.useState)(null),P=Object(p.a)(B,2),U=P[0],W=P[1],Z=Object(r.useState)(!1),F=Object(p.a)(Z,2),H=F[0],V=F[1],ce=H?"crosshair":"auto";function oe(e){"Shift"===e.key&&V(!0)}function ie(e){"Shift"===e.key&&V(!1)}Object(r.useEffect)((function(){return window.addEventListener("keydown",oe),window.addEventListener("keyup",ie),function(){window.removeEventListener("keydown",oe),window.addEventListener("keyup",ie)}})),i.dirty&&(g(i.topLeftX),E(i.topLeftY),j(i.scale),z(i.zoomLevel),e(k()));var le="translate(".concat(h+A,", ").concat(v+Y,") scale(").concat(X,")");function de(t){var a,r,n,c=(t.clientX-h)/X,o=(t.clientY-v)/X,i=-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002),l=(a=X*Math.pow(2,i),r=1*Math.pow(8,-4),n=1*Math.pow(8,4),Math.min(Math.max(a,r),n)),d=t.clientX-c*l,s=t.clientY-o*l;j(l),g(d),E(s),z(function(e,t){var a=Object(f.a)(Object(f.a)({},x),{},{0:-1/0,10:1/0}),r=[a[e-1],a[e+1]],n=r[0],c=r[1];if(t>n&&t<c)return e;if(t<=n){for(var o=1;o<e;o++)if(t<=a[o])return o}else if(t>=c)for(var i=9;i>e;i--)if(t>=a[i])return i;throw new Error("Couldn't figure out a zoomLevel for scale ".concat(t))}(N,l)),we(e,d,s,l,N)}return n.a.createElement("svg",{id:"odys-svg",style:{height:"100%",width:"100%",background:"var(--odys-background-gray)"},onMouseMove:function(r){return function(r){o&&e(te({clickX:r.clientX,clickY:r.clientY,svgTopLeftX:i.topLeftX,svgTopLeftY:i.topLeftY,svgScale:i.scale,svgZoomLevel:i.zoomLevel})),t&&e(q({clickX:r.clientX,clickY:r.clientY,scale:i.scale})),a&&e(re({clickX:r.clientX,clickY:r.clientY,svgTopLeftX:i.topLeftX,svgTopLeftY:i.topLeftY,svgScale:i.scale})),null!==U&&(b(r.clientX-U.startX),R(r.clientY-U.startY)),l&&e($({clickX:r.clientX,clickY:r.clientY,svgScale:i.scale}))}(r)},onMouseDown:function(t){return function(t){e(K()),t.altKey?(e(Q({clickX:t.clientX,clickY:t.clientY})),e(ee({clickX:t.clientX,clickY:t.clientY}))):H?e(ae({x:t.clientX,y:t.clientY,svgTopLeftX:h,svgTopLeftY:v,svgScale:X})):W({startX:t.clientX,startY:t.clientY})}(t)},onMouseUp:function(r){return function(r){c&&c.clickX===r.clientX&&c.clickY===r.clientY&&e(T({clickX:r.clientX,clickY:r.clientY})),t&&e(G()),a&&e(ne()),null!==U&&(W(null),g(h+A),E(v+Y),b(0),R(0),e(O({topLeftX:h,topLeftY:v}))),l&&e(J())}(r)},onWheel:function(e){return de(e)},cursor:ce},n.a.createElement("g",{id:"odys-zoomable-group",transform:le},n.a.createElement(ve,null),n.a.createElement(Ee,null)))};var Se=n.a.memo((function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.shapes.select})),a=null===t||void 0===t?void 0:t.id,c=null===t||void 0===t?void 0:t.isEditing,o=Object(d.c)((function(e){return a&&e.shapes.data[a]}));Object(r.useEffect)((function(){if(void 0!==a&&void 0!==c){var t=function(e,t,a){return function(r){"Backspace"===r.code&&!1===a&&e(U(t))}}(e,a,c);return window.addEventListener("keydown",t,{capture:!0}),function(){window.removeEventListener("keydown",t,{capture:!0})}}}));var i=Object(r.useRef)(null),l=o&&o.text,s=c&&l?l:"";Object(r.useEffect)((function(){i&&i.current&&i.current.focus()}));return a?n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{style:{height:"0px",padding:"0px",border:"0px",opacity:0},ref:i,type:"text",onChange:function(t){e(W(t.target.value))},value:s})):n.a.createElement(n.a.Fragment,null)})),Ae=function(){return"id-".concat(Object(y.v4)())},be=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.shapes}));if(0===Object.entries(t.data).length){var a=Ae(),r=Ae(),c=(Ae(),function(e,t,a){return{type:"rect",id:Ae(),text:e,x:t,y:a,translateX:0,translateY:0,width:150,height:75,deltaWidth:0,deltaHeight:0,isGroupingRect:!1,createdAtZoomLevel:5}});e(P(c("A",150,100))),e(P(c("B",400,100)))}return n.a.createElement(n.a.Fragment,null,n.a.createElement(xe,null),n.a.createElement("div",{style:{opacity:0,display:"flex",flex:"0 0",height:"0px"}},n.a.createElement(Se,null)))},De=a(40),Ce=a.n(De),Oe=a(41),Ye=a.n(Oe);var ke,Re,Le,_e,Xe,je=function(){var e=Object(d.c)((function(e){return e.svg})),t=e.topLeftX,a=e.topLeftY,c=e.scale,o=e.zoomLevel,i=function(e){var t=Object(r.useState)({x:0,y:0}),a=Object(p.a)(t,2),c=a[0],o=a[1],i=e.topLeftX,l=e.topLeftY,d=e.scale;return Object(r.useEffect)((function(){var e=function(e,t,a,r){return function(n){var c=(n.clientX-e)/a,o=(n.clientY-t)/a;r({x:c,y:o})}}(i,l,d,o);return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[i,l,d,o]),n.a.createElement("div",{style:{display:"flex",flexFlow:"row nowrap",backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 2px -2px grey",border:"1px rgba(204,204,204,0.5) solid",padding:"12px",minWidth:"100px",maxWidth:"200px",justifyContent:"space-around",fontSize:"12px"}},n.a.createElement("p",{style:{borderTopLeftRadius:"8px",borderBottomLeftRadius:"8px",backgroundColor:"white"}},c.x.toFixed(2)),n.a.createElement("p",{style:{borderLeft:"1px rgba(204, 204, 204, 0.5) solid",margin:"-3px 5px"}}),n.a.createElement("p",{style:{borderTopRightRadius:"8px",borderBottomRightRadius:"8px",backgroundColor:"white"}},c.y.toFixed(2)))},l=function(e){var t=Object(d.b)(),a=e.zoomLevel;return n.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap",backgroundColor:"white",borderRadius:"8px",boxShadow:"0px 4px 2px -2px grey",border:"1px rgba(204,204,204,0.5) solid",padding:"6px",justifyContent:"space-around",fontSize:"18px",alignSelf:"flex-end",marginBottom:"5px"}},n.a.createElement("img",{src:Ce.a,alt:"+",style:{height:"12px",padding:"4px"},onClick:function(){return t(D({zoomLevel:a+1})),void t(Y())}}),n.a.createElement("p",{style:{borderTop:"1px rgba(204, 204, 204, 0.5) solid",borderBottom:"1px rgba(204, 204, 204, 0.5) solid",padding:"6px",margin:"3px -1px",fontSize:"14px"}},a),n.a.createElement("img",{src:Ye.a,alt:"-",style:{height:"12px",padding:"4px"},onClick:function(){return t(D({zoomLevel:a-1})),void t(Y())}}))};return n.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap"}},n.a.createElement(l,{zoomLevel:o}),n.a.createElement(i,{topLeftX:t,topLeftY:a,scale:c}))},Ie=function(e){var t=Object(d.b)();return n.a.createElement("div",{style:{backgroundColor:"rgba(208, 0, 0, 0.05)",border:"1px solid rgb(208, 0, 0)",boxShadow:"rgb(208, 0, 0) 0px 4px 2px -2px",width:"200px",borderRadius:"20px",minHeight:"30px",paddingLeft:"10px",paddingRight:"10px",paddingBottom:"20px",margin:"5px 0px",fontSize:"small"}},n.a.createElement("div",{style:{display:"flex",paddingRight:"5px",paddingBottom:"5px",justifyContent:"flex-end"}},n.a.createElement("p",{onClick:function(e){return t(pe())}},"x")),n.a.createElement("span",null,e.message))},Te=function(){var e=Object(d.c)((function(e){return e.errors}));return n.a.createElement("div",{style:{display:"flex",flexFlow:"column nowrap"}},e.data.map((function(e,t){return n.a.createElement(Ie,{key:t,message:e.message})})))},Me=function(){return n.a.createElement("div",{style:{height:"100%",width:"100%"},className:"row"},n.a.createElement("div",{className:"col flex-elem"},n.a.createElement(be,null)),n.a.createElement("div",{style:{position:"absolute",bottom:"10px",right:"10px"}},n.a.createElement(je,null)),n.a.createElement("div",{style:{position:"absolute",top:"10px",right:"10px"}},n.a.createElement(Te,null)))},Ne=a(42),ze=a(26),Be=a.n(ze),Pe=(a(20),a(45),a(18));function Ue(){var e=Object(Ne.a)(["\n  query getUsers {\n    allUsers {\n      nodes {\n        email\n        id\n        name\n        createdAt\n      }\n    }\n  }\n"]);return Ue=function(){return e},e}!function(e){e.Natural="NATURAL",e.IdAsc="ID_ASC",e.IdDesc="ID_DESC",e.CommentAsc="COMMENT_ASC",e.CommentDesc="COMMENT_DESC",e.CreatedAtAsc="CREATED_AT_ASC",e.CreatedAtDesc="CREATED_AT_DESC",e.UpdatedAtAsc="UPDATED_AT_ASC",e.UpdatedAtDesc="UPDATED_AT_DESC",e.UserIdAsc="USER_ID_ASC",e.UserIdDesc="USER_ID_DESC",e.UserNameAsc="USER_NAME_ASC",e.UserNameDesc="USER_NAME_DESC",e.PostIdAsc="POST_ID_ASC",e.PostIdDesc="POST_ID_DESC",e.PrimaryKeyAsc="PRIMARY_KEY_ASC",e.PrimaryKeyDesc="PRIMARY_KEY_DESC"}(ke||(ke={})),function(e){e.Natural="NATURAL",e.IdAsc="ID_ASC",e.IdDesc="ID_DESC",e.TitleAsc="TITLE_ASC",e.TitleDesc="TITLE_DESC",e.BodyAsc="BODY_ASC",e.BodyDesc="BODY_DESC",e.CreatedAtAsc="CREATED_AT_ASC",e.CreatedAtDesc="CREATED_AT_DESC",e.UpdatedAtAsc="UPDATED_AT_ASC",e.UpdatedAtDesc="UPDATED_AT_DESC",e.UserIdAsc="USER_ID_ASC",e.UserIdDesc="USER_ID_DESC",e.PrimaryKeyAsc="PRIMARY_KEY_ASC",e.PrimaryKeyDesc="PRIMARY_KEY_DESC"}(Re||(Re={})),function(e){e.Natural="NATURAL",e.IdAsc="ID_ASC",e.IdDesc="ID_DESC",e.NameAsc="NAME_ASC",e.NameDesc="NAME_DESC",e.BatchAsc="BATCH_ASC",e.BatchDesc="BATCH_DESC",e.MigrationTimeAsc="MIGRATION_TIME_ASC",e.MigrationTimeDesc="MIGRATION_TIME_DESC",e.PrimaryKeyAsc="PRIMARY_KEY_ASC",e.PrimaryKeyDesc="PRIMARY_KEY_DESC"}(Le||(Le={})),function(e){e.Natural="NATURAL",e.IndexAsc="INDEX_ASC",e.IndexDesc="INDEX_DESC",e.IsLockedAsc="IS_LOCKED_ASC",e.IsLockedDesc="IS_LOCKED_DESC",e.PrimaryKeyAsc="PRIMARY_KEY_ASC",e.PrimaryKeyDesc="PRIMARY_KEY_DESC"}(_e||(_e={})),function(e){e.Natural="NATURAL",e.IdAsc="ID_ASC",e.IdDesc="ID_DESC",e.NameAsc="NAME_ASC",e.NameDesc="NAME_DESC",e.EmailAsc="EMAIL_ASC",e.EmailDesc="EMAIL_DESC",e.PasswordAsc="PASSWORD_ASC",e.PasswordDesc="PASSWORD_DESC",e.AccountVerifiedAsc="ACCOUNT_VERIFIED_ASC",e.AccountVerifiedDesc="ACCOUNT_VERIFIED_DESC",e.CreatedAtAsc="CREATED_AT_ASC",e.CreatedAtDesc="CREATED_AT_DESC",e.UpdatedAtAsc="UPDATED_AT_ASC",e.UpdatedAtDesc="UPDATED_AT_DESC",e.PrimaryKeyAsc="PRIMARY_KEY_ASC",e.PrimaryKeyDesc="PRIMARY_KEY_DESC"}(Xe||(Xe={}));var We=Be()(Ue());var Ke=function(){var e,t=Object(r.useState)([]),a=Object(p.a)(t,2),c=a[0],o=a[1],i=Pe.c(We,e),l=i.data,d=i.error,s=i.loading;return Object(r.useEffect)((function(){l&&l&&l.allUsers&&l.allUsers.nodes&&o(l.allUsers.nodes),d&&console.log(d),s&&console.log(s)}),[l,d,s]),n.a.createElement("div",null,n.a.createElement("h2",null,"Hello users,"),c&&c.length>0&&c.map((function(e,t){return n.a.createElement("p",{key:"user_".concat(t)},e.name)})))},Ze=Object(i.c)({shapes:oe,svg:R,errors:fe}),Fe=Object(l.a)({reducer:Ze}),He=new u.a,qe=function(){return n.a.createElement(s.b,{client:He},n.a.createElement(d.a,{store:Fe},n.a.createElement(Ke,null),n.a.createElement(Me,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.68bc1da8.chunk.js.map